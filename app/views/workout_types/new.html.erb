<script>
  tinymce.init({
    selector: '.mceEditor',
    menubar: false,
    branding: false,
    plugins: "link autolink lists",
    menubar: "insert",
    toolbar: "undo redo | cut copy paste pastetext | styleselect | bold italic | link bullist numlist",
  });
</script>

<script>
	$( document ).ready(function() {
	    if ($('#desktopTest').is(':hidden')) {
	    	$('.desktop').attr("hidden", true);
		} else {
				$('.mobile').attr("hidden", true);
		}
	});
</script>

<div class="workout-box col-xs-10 col-xs-offset-1" id="new-workout-type">
	<%= simple_form_for (@workout_type) do |f| %>
		<%= f.input :type_name, label: 'What will you call this workout?' %>
		<br />
		<%= f.input :description, label: 'Add a brief description of this workout.', input_html: { class: 'mceEditor' } %>
	  <br />
	  <p>Who should be able to see this workout?</p>

		<%= f.label :public, "All Users", :value => true %>
    <%= f.radio_button :public, true, :checked => true %>
    &nbsp;
    <%= f.label :public, "Myself Only", :value => false %>
    <%= f.radio_button :public, false %>

	 	<h3>Now enter up to 10 exercises:</h3> 
	 	<div class="mobile">
	    <%= f.fields_for :exercise_types, @exercise_types do |builder| %>
	      <%= render 'exercise_fields_table', :f => builder %>
	    <% end %>
	  </div>
	  <div class="desktop">
	  	<table class="table table-bordered table-striped table-responsive">
			  <thead>
			    <tr>
			      <th>Exercise Name</th>
			      <th>Sets<br /><small><i>(assuming 1 set if left blank)</i></small></th>
			      <th>Reps</th>
			      <th>Load, lb or % max<br /><small><i>(leave blank if bodyweight)</i></small></th>
			      <th>Link to instructions on how to perform this exercise</th>
			    </tr>
			  </thead>
			  <tbody>
			    <%= f.fields_for :exercise_types, @exercise_types do |builder| %>
			      <%= render 'exercise_fields_table_desktop', :f => builder %>	
			    <% end %>
			  </tbody>
		</table>
	  </div>
		<%= f.submit 'Create Workout Routine', :class=>"btn btn-primary", :id=>"routine_submit" %>
	<% end %>
</div>

<div id="desktopTest" class="hidden-xs"></div>

<script>
// color palettes are taken from http://www.color-hex.com/color-palettes
	palettes = {
		'sunrise': ['#e65c6f', '#f98d77', '#ffcb69', '#ffe269',	'#fffa85', '#fffa85', '#ffe269', '#ffcb69', '#f98d77', '#e65c6f'],
		'blueskies': ['#76b8cc', '#87ccdb', '#a2d9e1', '#bfe4e5', '#d0eee6', '#d0eee6', '#bfe4e5', '#a2d9e1', '#87ccdb', '#76b8cc'],
		'illusionfire': ['#fff2bf', '#ffe2bf', '#fbd0be', '#ffc5c1', '#fdacb9', '#fdacb9', '#ffc5c1', '#fbd0be', '#ffe2bf', '#fff2bf'],
		'softhighlights': ['#ebe4c2', '#d5cad0', '#c7d7cf', '#dfcdbb', '#aec2d0', '#aec2d0', '#dfcdbb', '#c7d7cf', '#d5cad0', '#ebe4c2'],
		'illusionblue': ['#b9eafd', '#d0edff', '#d7e8fd', '#e8e8fd', '#fcecff', '#fcecff', '#e8e8fd', '#d7e8fd', '#d0edff', '#b9eafd']
	}

	palette_names = Array('sunrise', 'blueskies', 'illusionfire', 'softhighlights', 'illusionblue');
	palette_name = palette_names[Math.floor(Math.random()*palette_names.length)];
	palette = palettes[palette_name];
	
	i = 0;
	$('.random-color-box').each(function(n) {
    $(this).css('background', palette[i]);
    i++;
  });
</script>

